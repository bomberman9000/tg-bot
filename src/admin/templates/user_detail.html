{% extends "base.html" %}
{% block title %}{{ user.full_name }} ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å{% endblock %}
{% block content %}
<div class="flex">
    <aside class="w-64 bg-gray-800 min-h-screen p-4">
        <div class="text-white text-xl font-bold mb-8">üöõ Logistics</div>
        <nav>
            <a href="/admin" class="block py-2 px-4 text-gray-300 hover:bg-gray-700 rounded mb-2">
                <i class="fas fa-chart-line mr-2"></i> –î–∞—à–±–æ—Ä–¥
            </a>
            <a href="/admin/users" class="block py-2 px-4 text-white bg-gray-700 rounded mb-2">
                <i class="fas fa-users mr-2"></i> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            </a>
            <a href="/admin/cargos" class="block py-2 px-4 text-gray-300 hover:bg-gray-700 rounded mb-2">
                <i class="fas fa-truck mr-2"></i> –ì—Ä—É–∑—ã
            </a>
            <a href="/admin/reports" class="block py-2 px-4 text-gray-300 hover:bg-gray-700 rounded mb-2">
                <i class="fas fa-flag mr-2"></i> –ñ–∞–ª–æ–±—ã
            </a>
            <a href="/admin/logout" class="block py-2 px-4 text-red-400 hover:bg-gray-700 rounded mt-8">
                <i class="fas fa-sign-out-alt mr-2"></i> –í—ã—Ö–æ–¥
            </a>
        </nav>
    </aside>
    
    <main class="flex-1 p-8">
        <a href="/admin/users" class="text-blue-600 hover:underline mb-4 inline-block">‚Üê –ù–∞–∑–∞–¥</a>
        
        <div class="bg-white rounded-lg shadow p-6 mb-6">
            <div class="flex justify-between items-start">
                <div>
                    <h1 class="text-3xl font-bold">{{ user.full_name }}</h1>
                    <p class="text-gray-500">ID: {{ user.id }} | @{{ user.username or '‚Äî' }}</p>
                </div>
                <div class="space-x-2">
                    {% if user.is_banned %}
                    <form action="/admin/users/{{ user.id }}/unban" method="POST" class="inline">
                        <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">–†–∞–∑–±–∞–Ω–∏—Ç—å</button>
                    </form>
                    {% else %}
                    <form action="/admin/users/{{ user.id }}/ban" method="POST" class="inline">
                        <button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">–ó–∞–±–∞–Ω–∏—Ç—å</button>
                    </form>
                    {% endif %}
                </div>
            </div>
            
            <div class="grid grid-cols-4 gap-4 mt-6">
                <div class="bg-gray-50 p-4 rounded">
                    <div class="text-gray-500 text-sm">–¢–µ–ª–µ—Ñ–æ–Ω</div>
                    <div class="font-medium">{{ user.phone or '‚Äî' }}</div>
                </div>
                <div class="bg-gray-50 p-4 rounded">
                    <div class="text-gray-500 text-sm">–ö–æ–º–ø–∞–Ω–∏—è</div>
                    <div class="font-medium">{{ user.company or '‚Äî' }}</div>
                </div>
                <div class="bg-gray-50 p-4 rounded">
                    <div class="text-gray-500 text-sm">Trust Score</div>
                    <div class="font-medium {% if user.trust_score >= 80 %}text-green-600{% elif user.trust_score >= 50 %}text-yellow-600{% else %}text-red-600{% endif %}">
                        {{ user.trust_score }}/100
                    </div>
                </div>
                <div class="bg-gray-50 p-4 rounded">
                    <div class="text-gray-500 text-sm">–†–µ–π—Ç–∏–Ω–≥</div>
                    <div class="font-medium">{% if avg_rating %}‚≠ê {{ avg_rating }}{% else %}‚Äî{% endif %}</div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-2 gap-6">
            <!-- Cargos -->
            <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-bold mb-4">–ì—Ä—É–∑—ã ({{ cargos|length }})</h2>
                {% for cargo in cargos %}
                <div class="border-b py-2">
                    <div class="font-medium">{{ cargo.from_city }} ‚Üí {{ cargo.to_city }}</div>
                    <div class="text-sm text-gray-500">{{ cargo.weight }}—Ç, {{ "{:,}".format(cargo.price) }} ‚ÇΩ</div>
                </div>
                {% else %}
                <div class="text-gray-500">–ù–µ—Ç –≥—Ä—É–∑–æ–≤</div>
                {% endfor %}
            </div>
            
            <!-- Reports -->
            <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-bold mb-4">–ñ–∞–ª–æ–±—ã –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ({{ reports|length }})</h2>
                {% for report in reports %}
                <div class="border-b py-2">
                    <div class="font-medium text-red-600">{{ report.report_type.value }}</div>
                    <div class="text-sm text-gray-500">{{ report.description[:100] }}...</div>
                </div>
                {% else %}
                <div class="text-gray-500">–ù–µ—Ç –∂–∞–ª–æ–±</div>
                {% endfor %}
            </div>
        </div>
    </main>
</div>
{% endblock %}
